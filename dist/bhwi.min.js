var BhwiOptions=function(){function i(i){var e={dom_element:"bhwi",type:"instagram",speed:4e3,form:"timeline",images_number:8,lightbox:!0};this.options=jQuery.extend(e,i),this._validateOptions()}return i.prototype._validateOptions=function(){if("instagram"==this.options.type){if(null==this.options.client_id)throw new Error('For the instagram API the "client_id" is needed.')}else if(null==this.options.url)throw new Error('For the bhwi API the "url" is needed.')},i}(),BhwiHelper=function(){function i(i){this.dom_element=jQuery("#"+i).addClass("bhwi")}return i.prototype.buildLink=function(i){return jQuery("<a>").attr({href:i,target:"_blank"})},i.prototype.buildImage=function(i){return jQuery("<img>").attr("src",i)},i.prototype.buildSlide=function(i,e){return this.buildLink(i).append(this.buildImage(e))},i.prototype.append=function(i){i.appendTo(this.dom_element)},i.prototype.interval=function(i,e){var t=this;i();var n=function(){t.interval(i,e)};setTimeout(n,e)},i.prototype.nullTry=function(i,e){return null==i?null:i[e]},i}(),BhwiSliderCurrent=function(){function i(){this.position=-1}return i.prototype.setSliderCurrent=function(i,e,t){this.position=i,this.bhwi_image=e,this.jquery_element=t},i}(),BhwiSlider=function(){function i(i,e,t){var n=this;this._sildeImage=function(){var i=n.bhwi_silder_current.position+1;0!=i&&n.bhwi_silder_current.jquery_element.removeClass("current").fadeOut(n.speed/2),i==n.bhwi_images.images.length&&(i=0),n._setImage(n.bhwi_images.images[i],i)},this.bhwi_silder_current=new BhwiSliderCurrent,this.bhwi_helper=i,this.bhwi_images=e,this.bhwi_options=t,this.speed=this.bhwi_options.options.speed,this.bhwi_helper.interval(this._sildeImage,this.speed),this.bhwi_helper.dom_element.addClass("bhwi-slider")}return i.prototype._setImage=function(i,e){var t=jQuery('a[href$="'+i.link+'"]');t.length?t.addClass("current").fadeIn(this.speed/2):(t=this.bhwi_helper.buildSlide(i.link,i.standard).addClass("current").fadeIn(this.speed/2),this.bhwi_helper.append(t)),this.bhwi_silder_current.setSliderCurrent(e,i,t)},i}(),BhwiTimeline=function(){function i(i,e,t){this.bhwi_helper=i,this.bhwi_images=e,this.bhwi_options=t,this.bhwi_helper.dom_element.addClass("bhwi-timeline"),this._setAllImages(),this._responsiveImages()}return i.prototype._setAllImages=function(){var i=this,e=0;jQuery.each(this.bhwi_images.images,function(t,n){var r=i.bhwi_helper.buildSlide(n.link,n.standard);return i.bhwi_helper.append(r),jQuery(r).find("img").on("load",function(){e++,e==i.bhwi_options.options.images_number&&i._resizeImages()}),t==i.bhwi_options.options.images_number-1?!1:void 0})},i.prototype._resizeImages=function(){var i=jQuery(this.bhwi_helper.dom_element).find("img");i.height("auto"),i.height(i.height())},i.prototype._responsiveImages=function(){var i=this;$(window).resize(function(){i._resizeImages()})},i}(),BhwiImage=function(){function i(i,e,t,n,r,s){this.link=i,this.standard=e,this.thumbnail=t,this.author=n,this.text=r,this.created_time=s}return i}(),BhwiImages=function(){function i(){this.images=new Array}return i.prototype.addImage=function(i){this.images.push(i)},i.prototype.addBuildImage=function(i,e,t,n,r,s){this.addImage(new BhwiImage(i,e,t,n,r,s))},i}(),BhwiUser=function(){function i(i,e){this.id=i,"bhwi"===e.options.type?this.url=this._buildBhwiUrl(e.options.url):this.url=this._buildInstagramUrl(e.options.client_id)}return i.prototype._buildInstagramUrl=function(i){return"https://api.instagram.com/v1/users/"+this.id+"/media/recent/?client_id="+i+"&callback=?"},i.prototype._buildBhwiUrl=function(i){return i+this.id},i}(),Bhwi=function(){function i(i,e){var t=this;this._initBhwiSlider=function(){t.bhwi_silder=new BhwiSlider(t.bhwi_helper,t.bhwi_images,t.bhwi_options)},this._initBhwiTimeline=function(){t.bhwi_timeline=new BhwiTimeline(t.bhwi_helper,t.bhwi_images,t.bhwi_options)},this._decideInit=function(){switch(this.bhwi_options.options.form){case"slider":this._initBhwiSlider();break;default:this._initBhwiTimeline()}},this._basicVaildation(i,e),this.bhwi_options=new BhwiOptions(e),this.bhwi_helper=new BhwiHelper(this.bhwi_options.options.dom_element),this.bhwi_user=new BhwiUser(i,this.bhwi_options),this.bhwi_images=new BhwiImages,this._callApi()}return i.prototype._callApi=function(){var i=this;jQuery.getJSON(this.bhwi_user.url).done(function(e){jQuery.each(e.data,function(e,t){i.bhwi_images.addBuildImage(t.link,t.images.standard_resolution.url,t.images.thumbnail.url,t.user.username,i.bhwi_helper.nullTry(t.caption,"text"),t.created_time)}),i._decideInit()})},i.prototype._basicVaildation=function(i,e){if(null==i)throw new Error('The param "id" is required.');if(null==e)throw new Error('The param "options" are required.')},i}();